<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <title>–£–§–ö–∏–° –ö–∞—Ä–∞–≥–∞–Ω–¥–∏–Ω—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏ ‚Äî –°–ª—É–∂–µ–±–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- –°—Ç–∏–ª–∏ -->
    <link rel="stylesheet" href="style.css">

    <!-- Telegram WebApp (–Ω–µ –º–µ—à–∞–µ—Ç —Ä–∞–±–æ—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ) -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>

<body>

<!-- ============================================================= -->
<!-- –≠–ö–†–ê–ù 0 ‚Äî –í–´–ë–û–† –†–ï–ñ–ò–ú–ê                                        -->
<!-- ============================================================= -->
<div id="modeScreen" class="screen active">
    <div class="mode-container">
        <!-- –ì–µ—Ä–±: –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª img/karaganda_gerb.png –≤ —Ä–µ–ø–æ -->
        <div class="mode-logo-wrap">
            <img src="img/karaganda_gerb.png" class="logo" alt="–ì–µ—Ä–± –ö–∞—Ä–∞–≥–∞–Ω–¥–∏–Ω—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏">
        </div>
        <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å</h1>
        <div class="subtitle">
            –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–π –∫—É–ª—å—Ç—É—Ä—ã –∏ —Å–ø–æ—Ä—Ç–∞ –ö–∞—Ä–∞–≥–∞–Ω–¥–∏–Ω—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏
        </div>

        <button class="btn primary wide" onclick="selectMode('employee')">
            –Ø —Å–æ—Ç—Ä—É–¥–Ω–∏–∫
        </button>

        <button class="btn secondary wide" onclick="selectMode('guest')">
            –Ø –≥–æ—Å—Ç—å
        </button>
    </div>
</div>


<!-- ============================================================= -->
<!-- –≠–ö–†–ê–ù 1 ‚Äî –í–´–ë–û–† –û–†–ì–ê–ù–ò–ó–ê–¶–ò–ò                                   -->
<!-- ============================================================= -->
<div id="orgSelectScreen" class="screen">
    <div class="screen-title">–í—ã–±–µ—Ä–∏—Ç–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é</div>
    <div class="list-container" id="organizationList"></div>

    <button class="btn secondary wide" onclick="backToMode()">–ù–∞–∑–∞–¥</button>
</div>


<!-- ============================================================= -->
<!-- –≠–ö–†–ê–ù 1.5 ‚Äî –í–´–ë–û–† –û–¢–î–ï–õ–ê (–¢–æ–ª—å–∫–æ –¥–ª—è –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è)              -->
<!-- ============================================================= -->
<div id="deptSelectScreen" class="screen">
    <div class="screen-title">–í—ã–±–µ—Ä–∏—Ç–µ –æ—Ç–¥–µ–ª</div>
    <div class="list-container" id="departmentList"></div>

    <button class="btn secondary wide" onclick="backToOrg()">–ù–∞–∑–∞–¥</button>
</div>


<!-- ============================================================= -->
<!-- –≠–ö–†–ê–ù 2 ‚Äî –í–´–ë–û–† –°–û–¢–†–£–î–ù–ò–ö–ê / –î–û–õ–ñ–ù–û–°–¢–ò                        -->
<!-- ============================================================= -->
<div id="roleSelectScreen" class="screen">
    <div class="screen-title">–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</div>
    <div class="list-container" id="roleList"></div>

    <button class="btn secondary wide" onclick="backFromRole()">–ù–∞–∑–∞–¥</button>
</div>


<!-- ============================================================= -->
<!-- –≠–ö–†–ê–ù 3 ‚Äî –ì–õ–ê–í–ù–´–ô –≠–ö–†–ê–ù –°–û–¢–†–£–î–ù–ò–ö–ê                            -->
<!-- ============================================================= -->
<div id="employeeHome" class="screen">
    <div class="header">
        <div class="header-logo-circle">
            <img src="img/karaganda_gerb.png" class="header-logo" alt="–ì–µ—Ä–±">
        </div>
        <div>
            <div class="header-role" id="empRole">‚Äî</div>
            <div class="header-org" id="empOrg">‚Äî</div>
        </div>
    </div>

    <!-- –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ –ø–ª–∏—Ç–æ–∫ -->
    <div class="menu-row">
        <button class="menu-pill" onclick="openCreateTask()">
            <span class="pill-icon">‚ûï</span>
            <span class="pill-label">–°–æ–∑–¥–∞—Ç—å –ø–æ—Ä—É—á–µ–Ω–∏–µ</span>
        </button>
        <button class="menu-pill" onclick="openTasksScreen()">
            <span class="pill-icon">üìù</span>
            <span class="pill-label">–ü–æ—Ä—É—á–µ–Ω–∏—è</span>
        </button>
        <button class="menu-pill" onclick="openDatabase()">
            <span class="pill-icon">üìö</span>
            <span class="pill-label">–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö</span>
        </button>
        <button class="menu-pill" onclick="openAIChat()">
            <span class="pill-icon">ü§ñ</span>
            <span class="pill-label">–ò–ò</span>
        </button>
    </div>

    <!-- –Ω–∏–∂–Ω–µ–µ –º–µ–Ω—é -->
    <div class="bottom-nav">
        <div class="nav-item active" onclick="goEmployeeHome()">
            <span class="nav-icon">üè†</span>
            <span class="nav-label">–ì–ª–∞–≤–Ω–∞—è</span>
        </div>
        <div class="nav-item" onclick="openTasksScreen()">
            <span class="nav-icon">üìù</span>
            <span class="nav-label">–ü–æ—Ä—É—á–µ–Ω–∏—è</span>
        </div>
        <div class="nav-item" onclick="openDatabase()">
            <span class="nav-icon">üìö</span>
            <span class="nav-label">–ë–∞–∑–∞</span>
        </div>
        <div class="nav-item" onclick="openAIChat()">
            <span class="nav-icon">ü§ñ</span>
            <span class="nav-label">–ò–ò</span>
        </div>
        <div class="nav-item" onclick="openProfile()">
            <span class="nav-icon">üë§</span>
            <span class="nav-label">–ü—Ä–æ—Ñ–∏–ª—å</span>
        </div>
    </div>
</div>


<!-- ============================================================= -->
<!-- –ü–†–û–§–ò–õ–¨ –°–û–¢–†–£–î–ù–ò–ö–ê                                           -->
<!-- ============================================================= -->
<div id="employeeProfile" class="screen">
    <div class="screen-title">–ü—Ä–æ—Ñ–∏–ª—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</div>

    <div class="avatar-block">
        <div class="avatar-circle">
            <img id="employeeAvatarImg" alt="–§–æ—Ç–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞">
            <span id="employeeAvatarPlaceholder">–§–æ—Ç–æ</span>
        </div>
        <button class="btn secondary small" onclick="uploadEmployeePhoto()">–ò–∑–º–µ–Ω–∏—Ç—å —Ñ–æ—Ç–æ</button>
        <input type="file" id="employeeAvatarInput" accept="image/*" capture="environment" style="display:none" onchange="handleEmployeePhoto(this)">
    </div>

    <div class="profile-block">
        <div class="profile-label">–î–æ–ª–∂–Ω–æ—Å—Ç—å</div>
        <div id="profileRole">‚Äî</div>

        <div class="profile-label">–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è</div>
        <div id="profileOrg">‚Äî</div>
    </div>

    <button class="btn danger wide" onclick="resetEmployee()">–í—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞</button>

    <div class="bottom-nav">
        <div class="nav-item" onclick="goEmployeeHome()">
            <span class="nav-icon">üè†</span>
            <span class="nav-label">–ì–ª–∞–≤–Ω–∞—è</span>
        </div>
        <div class="nav-item" onclick="openTasksScreen()">
            <span class="nav-icon">üìù</span>
            <span class="nav-label">–ü–æ—Ä—É—á–µ–Ω–∏—è</span>
        </div>
        <div class="nav-item" onclick="openDatabase()">
            <span class="nav-icon">üìö</span>
            <span class="nav-label">–ë–∞–∑–∞</span>
        </div>
        <div class="nav-item" onclick="openAIChat()">
            <span class="nav-icon">ü§ñ</span>
            <span class="nav-label">–ò–ò</span>
        </div>
        <div class="nav-item active">
            <span class="nav-icon">üë§</span>
            <span class="nav-label">–ü—Ä–æ—Ñ–∏–ª—å</span>
        </div>
    </div>
</div>


<!-- ============================================================= -->
<!-- –ë–ê–ó–ê –î–ê–ù–ù–´–• –°–û–¢–†–£–î–ù–ò–ö–ê                                       -->
<!-- ============================================================= -->
<div id="databaseScreen" class="screen">
    <div class="screen-title">–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö</div>

    <div id="dbSectionList" class="db-list"></div>

    <button class="btn primary wide" onclick="addDbSection()">–î–æ–±–∞–≤–∏—Ç—å —Ä–∞–∑–¥–µ–ª</button>
    <button class="btn secondary wide" onclick="goEmployeeHome()">–ù–∞–∑–∞–¥</button>
</div>


<!-- ============================================================= -->
<!-- –°–û–ó–î–ê–ù–ò–ï –ü–û–†–£–ß–ï–ù–ò–Ø                                           -->
<!-- ============================================================= -->
<div id="createTaskScreen" class="screen">
    <div class="screen-title">–ù–æ–≤–æ–µ –ø–æ—Ä—É—á–µ–Ω–∏–µ</div>

    <div class="form">
        <label>–ö–æ–º—É</label>
        <select id="taskTarget"></select>

        <label>–û–ø–∏—Å–∞–Ω–∏–µ</label>
        <textarea id="taskDescription" placeholder="–û–ø–∏—à–∏—Ç–µ —Å—É—Ç—å –ø–æ—Ä—É—á–µ–Ω–∏—è..."></textarea>

        <label>–î–µ–¥–ª–∞–π–Ω</label>
        <input type="date" id="taskDeadline">
    </div>

    <div class="screen-title small-title">–¢–∞–±–ª–∏—Ü–∞ –ø–æ—Ä—É—á–µ–Ω–∏—è</div>

    <div id="tableEditor" class="table-editor"></div>

    <div class="table-controls">
        <button class="btn secondary" onclick="addTableColumn()">+ —Å—Ç–æ–ª–±–µ—Ü</button>
        <button class="btn secondary" onclick="addTableRow()">+ —Å—Ç—Ä–æ–∫–∞</button>
    </div>

    <button class="btn primary wide" onclick="saveTask()">–°–æ–∑–¥–∞—Ç—å –ø–æ—Ä—É—á–µ–Ω–∏–µ</button>
    <button class="btn secondary wide" onclick="backFromCreateTask()">–ù–∞–∑–∞–¥</button>
</div>


<!-- ============================================================= -->
<!-- –°–ü–ò–°–û–ö –ü–û–†–£–ß–ï–ù–ò–ô                                             -->
<!-- ============================================================= -->
<div id="tasksScreen" class="screen">
    <div class="screen-title">–ü–æ—Ä—É—á–µ–Ω–∏—è</div>

    <div id="tasksList"></div>

    <button class="btn secondary wide" onclick="goEmployeeHome()">–ù–∞–∑–∞–¥</button>
</div>


<!-- ============================================================= -->
<!-- –ò–ò-–ß–ê–¢                                                       -->
<!-- ============================================================= -->
<div id="aiScreen" class="screen">
    <div class="screen-title">–ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç</div>

    <div id="aiChat" class="chat-container"></div>

    <div class="chat-input-box">
        <input id="aiMessage" placeholder="–í–∞—à –≤–æ–ø—Ä–æ—Å..." />
        <button onclick="sendAI()">‚û§</button>
    </div>

    <button class="btn secondary wide" onclick="backFromAI()">–ù–∞–∑–∞–¥</button>
</div>


<!-- ============================================================= -->
<!-- –ì–û–°–¢–¨ ‚Äî –ì–õ–ê–í–ù–ê–Ø                                              -->
<!-- ============================================================= -->
<div id="guestHome" class="screen">
    <div class="header guest">
        <div class="header-logo-circle">
            <img src="img/karaganda_gerb.png" class="header-logo" alt="–ì–µ—Ä–±">
        </div>
        <div>
            <div class="header-title">–ì–æ—Å—Ç–µ–≤–æ–π —Ä–µ–∂–∏–º</div>
            <div class="header-org">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è –Ω–∞—Å–µ–ª–µ–Ω–∏—è</div>
        </div>
    </div>

    <div class="menu-row">
        <button class="menu-pill" onclick="openAIChat()">
            <span class="pill-icon">ü§ñ</span>
            <span class="pill-label">–ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å –ò–ò</span>
        </button>
        <button class="menu-pill" onclick="openGuestRequestInfo()">
            <span class="pill-icon">üì®</span>
            <span class="pill-label">–ó–∞–ø—Ä–æ—Å–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é</span>
        </button>
        <button class="menu-pill" onclick="openGuestEvents()">
            <span class="pill-icon">üìÖ</span>
            <span class="pill-label">–ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</span>
        </button>
        <button class="menu-pill" onclick="openGuestSections()">
            <span class="pill-icon">üèüÔ∏è</span>
            <span class="pill-label">–°–µ–∫—Ü–∏–∏</span>
        </button>
        <button class="menu-pill" onclick="openGuestResults()">
            <span class="pill-icon">üèÖ</span>
            <span class="pill-label">–ù–æ–≤–æ—Å—Ç–∏ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</span>
        </button>
    </div>

    <div class="bottom-nav">
        <div class="nav-item active" onclick="goGuestHome()">
            <span class="nav-icon">üè†</span>
            <span class="nav-label">–ì–ª–∞–≤–Ω–∞—è</span>
        </div>
        <div class="nav-item" onclick="openAIChat()">
            <span class="nav-icon">ü§ñ</span>
            <span class="nav-label">–ò–ò</span>
        </div>
        <div class="nav-item" onclick="openGuestProfile()">
            <span class="nav-icon">üë§</span>
            <span class="nav-label">–ü—Ä–æ—Ñ–∏–ª—å</span>
        </div>
    </div>
</div>


<!-- ============================================================= -->
<!-- –ü–†–û–§–ò–õ–¨ –ì–û–°–¢–Ø                                                -->
<!-- ============================================================= -->
<div id="guestProfile" class="screen">
    <div class="screen-title">–ü—Ä–æ—Ñ–∏–ª—å –≥–æ—Å—Ç—è</div>

    <div class="avatar-block">
        <div class="avatar-circle">
            <img id="guestAvatarImg" alt="–§–æ—Ç–æ –≥–æ—Å—Ç—è">
            <span id="guestAvatarPlaceholder">–§–æ—Ç–æ</span>
        </div>
        <button class="btn secondary small" onclick="uploadGuestPhoto()">–ò–∑–º–µ–Ω–∏—Ç—å —Ñ–æ—Ç–æ</button>
        <input type="file" id="guestAvatarInput" accept="image/*" capture="environment" style="display:none" onchange="handleGuestPhoto(this)">
    </div>

    <div class="form">
        <label>–§–ò–û</label>
        <input id="guestFio">

        <label>–¢–µ–ª–µ—Ñ–æ–Ω</label>
        <input id="guestPhone">

        <label>–ò–ò–ù</label>
        <input id="guestIin">
    </div>

    <button class="btn primary wide" onclick="saveGuestProfile()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
    <button class="btn secondary wide" onclick="goGuestHome()">–ù–∞–∑–∞–¥</button>
</div>


<!-- ============================================================= -->
<!-- SCRIPTS -->
<!-- ============================================================= -->
<script src="script.js"></script>
</body>
</html>
