<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <title>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ø–æ—Ä—Ç–∞ ‚Äî –°–∏—Å—Ç–µ–º–∞ –ø–æ—Ä—É—á–µ–Ω–∏–π</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Telegram WebApp (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–µ –ª–æ–º–∞–µ—Ç —Ä–∞–±–æ—Ç—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ) -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>

    <style>
    /* ===== –ë–ê–ó–ê ===== */

    * {
        box-sizing: border-box;
    }

    html, body {
        margin: 0;
        padding: 0;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", sans-serif;
        background: #f4f5f9;
        color: #111827;
    }

    body {
        min-height: 100vh;
    }

    /* –û–±—â–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä-—ç–∫—Ä–∞–Ω */
    .screen {
        display: none;
        padding: 16px 16px 80px; /* –º–µ—Å—Ç–æ –ø–æ–¥ –Ω–∏–∂–Ω–µ–µ –º–µ–Ω—é */
        max-width: 480px;
        margin: 0 auto;
    }

    .screen.active {
        display: block;
    }

    /* –ó–∞–≥–æ–ª–æ–≤–∫–∏ —ç–∫—Ä–∞–Ω–æ–≤ */
    .screen-title {
        font-size: 20px;
        font-weight: 600;
        margin-bottom: 12px;
    }

    /* ===== –ö–ù–û–ü–ö–ò ===== */

    .btn {
        border-radius: 999px;
        border: none;
        padding: 10px 16px;
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 6px;
        transition: all 0.12s ease-out;
    }

    .btn.primary {
        background: #2563eb;
        color: #ffffff;
        box-shadow: 0 12px 30px rgba(37, 99, 235, 0.45);
    }

    .btn.primary:hover {
        box-shadow: 0 18px 40px rgba(37, 99, 235, 0.55);
        transform: translateY(-1px);
    }

    .btn.secondary {
        background: #ffffff;
        color: #111827;
        border: 1px solid #e5e7eb;
        box-shadow: 0 8px 24px rgba(15, 23, 42, 0.08);
    }

    .btn.secondary:hover {
        transform: translateY(-1px);
    }

    .btn.danger {
        background: #ef4444;
        color: #ffffff;
        box-shadow: 0 10px 28px rgba(239, 68, 68, 0.4);
    }

    .btn.wide {
        width: 100%;
        margin-top: 10px;
    }

    .btn:active {
        transform: translateY(1px);
        box-shadow: 0 6px 16px rgba(15, 23, 42, 0.35);
    }

    /* ===== –≠–ö–†–ê–ù –í–´–ë–û–†–ê –†–ï–ñ–ò–ú–ê ===== */

    #modeScreen {
        display: block; /* –Ω–∞—á–∞–ª—å–Ω—ã–π —ç–∫—Ä–∞–Ω */
        padding-top: 40px;
    }

    .mode-container {
        max-width: 380px;
        margin: 0 auto;
        text-align: center;
        padding: 24px 18px 18px;
        background: #ffffff;
        border-radius: 24px;
        box-shadow: 0 18px 40px rgba(15, 23, 42, 0.2);
        border: 1px solid rgba(209, 213, 219, 0.9);
    }

    .mode-container .logo {
        width: 72px;
        height: 72px;
        object-fit: contain;
        margin-bottom: 12px;
    }

    .mode-container h1 {
        margin: 0;
        font-size: 20px;
        font-weight: 600;
    }

    .mode-container .subtitle {
        margin-top: 4px;
        margin-bottom: 16px;
        font-size: 13px;
        color: #6b7280;
    }

    /* ===== –õ–ò–°–¢–´ / –°–ü–ò–°–ö–ò ===== */

    .list-container {
        display: flex;
        flex-direction: column;
        gap: 10px;
    }

    .list-item {
        background: #ffffff;
        border-radius: 16px;
        padding: 10px 12px;
        box-shadow: 0 10px 26px rgba(15, 23, 42, 0.12);
        border: 1px solid #e5e7eb;
        cursor: pointer;
        display: flex;
        flex-direction: column;
        gap: 3px;
    }

    .list-item-title {
        font-size: 15px;
        font-weight: 500;
    }

    .list-item-sub {
        font-size: 12px;
        color: #6b7280;
    }

    /* ===== –•–ï–î–ï–† ===== */

    .header {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 16px;
        margin-top: 8px;
    }

    .header.guest {
        justify-content: flex-start;
    }

    .header-logo {
        width: 42px;
        height: 42px;
        border-radius: 14px;
        background: #ffffff;
        object-fit: contain;
        box-shadow: 0 8px 22px rgba(15, 23, 42, 0.18);
    }

    .header-role {
        font-size: 14px;
        font-weight: 600;
    }

    .header-org {
        font-size: 12px;
        color: #6b7280;
    }

    .header-title {
        font-size: 16px;
        font-weight: 600;
    }

    /* ===== –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ (–ø–ª–∏—Ç–∫–∏) ===== */

    .menu-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 10px;
    }

    .menu-btn {
        border-radius: 18px;
        border: 1px solid #e5e7eb;
        padding: 14px 10px;
        background: #ffffff;
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
        text-align: left;
        box-shadow: 0 12px 28px rgba(15, 23, 42, 0.14);
        transition: all 0.1s ease-out;
    }

    .menu-btn:hover {
        transform: translateY(-1px);
        box-shadow: 0 18px 36px rgba(15, 23, 42, 0.18);
    }

    .menu-btn:active {
        transform: translateY(1px);
        box-shadow: 0 8px 22px rgba(15, 23, 42, 0.22);
    }

    /* ===== –ù–ò–ñ–ù–ï–ï –ú–ï–ù–Æ ===== */

    .bottom-nav {
        position: fixed;
        bottom: 12px;
        left: 0;
        right: 0;
        margin: 0 auto;
        max-width: 480px;
        background: #0b1020;
        border-radius: 18px;
        padding: 4px;
        display: flex;
        justify-content: space-around;
        align-items: center;
        box-shadow: 0 18px 46px rgba(15, 23, 42, 0.95);
        border: 1px solid rgba(148, 163, 184, 0.8);
        z-index: 20;
    }

    .nav-item {
        flex: 1;
        text-align: center;
        color: #9ca3af;
        padding: 6px 0;
        font-size: 16px;
        border-radius: 999px;
        cursor: pointer;
        transition: all 0.12s ease-out;
    }

    .nav-item.active {
        background: rgba(37, 99, 235, 0.32);
        color: #e5e7eb;
    }

    /* ===== –§–û–†–ú–´ ===== */

    .form {
        display: flex;
        flex-direction: column;
        gap: 8px;
        margin-bottom: 16px;
    }

    .form label {
        font-size: 13px;
        color: #4b5563;
    }

    .form input,
    .form textarea,
    .form select {
        border-radius: 12px;
        border: 1px solid #e5e7eb;
        padding: 8px 10px;
        font-size: 14px;
        font-family: inherit;
        background: #ffffff;
        outline: none;
        transition: border-color 0.1s ease-out, box-shadow 0.1s ease-out;
    }

    .form input:focus,
    .form textarea:focus,
    .form select:focus {
        border-color: #2563eb;
        box-shadow: 0 0 0 1px rgba(37, 99, 235, 0.35);
    }

    .form textarea {
        resize: vertical;
        min-height: 80px;
    }

    /* ===== –ü–†–û–§–ò–õ–¨ ===== */

    .profile-block {
        background: #ffffff;
        border-radius: 18px;
        padding: 12px 12px 10px;
        box-shadow: 0 10px 26px rgba(15, 23, 42, 0.16);
        border: 1px solid #e5e7eb;
        margin-bottom: 16px;
    }

    .profile-label {
        font-size: 12px;
        color: #6b7280;
        margin-top: 6px;
    }

    /* ===== –ß–ê–¢ –ò–ò ===== */

    .chat-container {
        background: #ffffff;
        border-radius: 16px;
        padding: 10px;
        box-shadow: 0 8px 24px rgba(15, 23, 42, 0.16);
        border: 1px solid #e5e7eb;
        min-height: 200px;
        max-height: 340px;
        overflow-y: auto;
        margin-bottom: 10px;
        font-size: 13px;
    }

    .chat-message {
        margin-bottom: 6px;
    }

    .chat-message.user {
        text-align: right;
    }

    .chat-bubble {
        display: inline-block;
        padding: 6px 9px;
        border-radius: 16px;
        max-width: 90%;
        word-wrap: break-word;
    }

    .chat-message.user .chat-bubble {
        background: #e0edff;
        color: #111827;
    }

    .chat-message.bot .chat-bubble {
        background: #f3f4f6;
        color: #111827;
    }

    .chat-input-box {
        display: flex;
        gap: 6px;
        align-items: center;
        margin-bottom: 14px;
    }

    .chat-input-box input {
        flex: 1;
        padding: 8px 10px;
        border-radius: 999px;
        border: 1px solid #e5e7eb;
        outline: none;
        font-size: 14px;
        background: #ffffff;
    }

    .chat-input-box input:focus {
        border-color: #2563eb;
        box-shadow: 0 0 0 1px rgba(37, 99, 235, 0.35);
    }

    .chat-input-box button {
        border-radius: 999px;
        border: none;
        width: 42px;
        height: 42px;
        background: #2563eb;
        color: #ffffff;
        font-size: 18px;
        cursor: pointer;
        box-shadow: 0 10px 26px rgba(37, 99, 235, 0.55);
    }

    /* ===== –¢–ê–ë–õ–ò–¶–ê –ü–û–†–£–ß–ï–ù–ò–Ø ===== */

    .table-editor {
        background: #ffffff;
        border-radius: 14px;
        border: 1px solid #e5e7eb;
        padding: 8px;
        box-shadow: 0 8px 24px rgba(15, 23, 42, 0.16);
        overflow-x: auto;
        margin-bottom: 12px;
    }

    .table-editor table {
        border-collapse: collapse;
        width: 100%;
        min-width: 280px;
        font-size: 13px;
    }

    .table-editor th,
    .table-editor td {
        border: 1px solid #e5e7eb;
        padding: 4px 6px;
    }

    .table-editor th {
        background: #f9fafb;
        font-weight: 500;
    }

    .table-editor input,
    .table-editor select {
        width: 100%;
        border: none;
        outline: none;
        font-size: 13px;
        background: transparent;
    }

    /* ===== –°–ü–ò–°–û–ö –ü–û–†–£–ß–ï–ù–ò–ô ===== */

    #tasksList .task-card {
        background: #ffffff;
        border-radius: 16px;
        padding: 10px 12px;
        box-shadow: 0 10px 26px rgba(15, 23, 42, 0.16);
        border: 1px solid #e5e7eb;
        margin-bottom: 8px;
    }

    .task-title {
        font-size: 14px;
        font-weight: 500;
        margin-bottom: 4px;
    }

    .task-meta {
        font-size: 12px;
        color: #6b7280;
    }

    /* ===== –ë–ê–ó–ê –î–ê–ù–ù–´–• ===== */

    .db-list {
        display: flex;
        flex-direction: column;
        gap: 10px;
    }

    .db-section {
        background: #ffffff;
        border-radius: 16px;
        padding: 10px 10px 8px;
        box-shadow: 0 8px 22px rgba(15, 23, 42, 0.14);
        border: 1px solid #e5e7eb;
    }

    .db-section input {
        width: 100%;
        border-radius: 10px;
        border: 1px solid #e5e7eb;
        padding: 6px 8px;
        font-size: 13px;
        margin-bottom: 6px;
    }

    .db-section textarea {
        width: 100%;
        border-radius: 10px;
        border: 1px solid #e5e7eb;
        padding: 6px 8px;
        font-size: 13px;
        min-height: 80px;
        resize: vertical;
    }

    /* ===== –ê–î–ê–ü–¢–ò–í ===== */

    @media (max-width: 400px) {
        .menu-grid {
            grid-template-columns: 1fr;
        }

        .mode-container {
            margin: 8px;
        }

        .bottom-nav {
            left: 6px;
            right: 6px;
            bottom: 8px;
        }
    }
    </style>
</head>
<body>

<!-- ============================
     –≠–ö–†–ê–ù –í–´–ë–û–†–ê –†–ï–ñ–ò–ú–ê
============================= -->
<div id="modeScreen" class="screen active">
    <div class="mode-container">
        <img src="https://upload.wikimedia.org/wikipedia/commons/f/f1/Coat_of_arms_of_Karagandy_Province.png"
             class="logo">
        <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å</h1>
        <p class="subtitle">–í —Å–∏—Å—Ç–µ–º—É –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ–∏–∑–∏—á–µ—Å–∫–æ–π –∫—É–ª—å—Ç—É—Ä—ã –∏ —Å–ø–æ—Ä—Ç–∞ –ö–∞—Ä–∞–≥–∞–Ω–¥–∏–Ω—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏</p>

        <button class="btn primary wide" onclick="selectMode('employee')">
            –Ø —Å–æ—Ç—Ä—É–¥–Ω–∏–∫
        </button>

        <button class="btn secondary wide" onclick="selectMode('guest')">
            –Ø –≥–æ—Å—Ç—å
        </button>
    </div>
</div>



<!-- ============================
     –≠–ö–†–ê–ù –í–´–ë–û–†–ê –û–†–ì–ê–ù–ò–ó–ê–¶–ò–ò
============================= -->
<div id="orgSelectScreen" class="screen">
    <h2 class="screen-title">–í—ã–±–µ—Ä–∏—Ç–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é</h2>

    <div class="list-container" id="organizationList">
        <!-- –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Å–∫—Ä–∏–ø—Ç–æ–º -->
    </div>

    <button class="btn secondary wide" onclick="backToMode()">–ù–∞–∑–∞–¥</button>
</div>



<!-- ============================
     –≠–ö–†–ê–ù –í–´–ë–û–†–ê –î–û–õ–ñ–ù–û–°–¢–ò
============================= -->
<div id="roleSelectScreen" class="screen">
    <h2 class="screen-title">–í—ã–±–µ—Ä–∏—Ç–µ –¥–æ–ª–∂–Ω–æ—Å—Ç—å</h2>

    <div class="list-container" id="roleList">
        <!-- –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Å–∫—Ä–∏–ø—Ç–æ–º -->
    </div>

    <button class="btn secondary wide" onclick="backToOrg()">–ù–∞–∑–∞–¥</button>
</div>



<!-- ============================
     –ì–õ–ê–í–ù–´–ô –≠–ö–†–ê–ù –°–û–¢–†–£–î–ù–ò–ö–ê
============================= -->
<div id="employeeHome" class="screen">
    <div class="header">
        <img src="https://upload.wikimedia.org/wikipedia/commons/f/f1/Coat_of_arms_of_Karagandy_Province.png" class="header-logo">
        <div>
            <div id="empRole" class="header-role"></div>
            <div id="empOrg" class="header-org"></div>
        </div>
    </div>

    <div class="menu-grid">
        <button class="menu-btn" onclick="openCreateTask()">
            –°–æ–∑–¥–∞—Ç—å –ø–æ—Ä—É—á–µ–Ω–∏–µ
        </button>
        <button class="menu-btn" onclick="openTasksScreen()">
            –ü–æ—Ä—É—á–µ–Ω–∏—è
        </button>
        <button class="menu-btn" onclick="openDatabase()">
            –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
        </button>
        <button class="menu-btn" onclick="openAIChat()">
            –ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç
        </button>
    </div>

    <!-- –ù–∏–∂–Ω–µ–µ –º–µ–Ω—é -->
    <div class="bottom-nav">
        <div class="nav-item active" onclick="goEmployeeHome()">üè†</div>
        <div class="nav-item" onclick="openTasksScreen()">üìù</div>
        <div class="nav-item" onclick="openDatabase()">üìö</div>
        <div class="nav-item" onclick="openAIChat()">ü§ñ</div>
        <div class="nav-item" onclick="openProfile()">üë§</div>
    </div>
</div>



<!-- ============================
     –ì–õ–ê–í–ù–´–ô –≠–ö–†–ê–ù –ì–û–°–¢–Ø
============================= -->
<div id="guestHome" class="screen">
    <div class="header guest">
        <img src="https://upload.wikimedia.org/wikipedia/commons/f/f1/Coat_of_arms_of_Karagandy_Province.png" class="header-logo">
        <div class="header-title">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π —Ü–µ–Ω—Ç—Ä</div>
    </div>

    <div class="menu-grid">
        <button class="menu-btn" onclick="openAIChat()">
            –ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç
        </button>
        <button class="menu-btn" onclick="openGuestEvents()">
            –ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
        </button>
        <button class="menu-btn" onclick="openGuestSections()">
            –°–µ–∫—Ü–∏–∏ –∏ —Ç—Ä–µ–Ω–µ—Ä—ã
        </button>
        <button class="menu-btn" onclick="openGuestResults()">
            –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–ø–æ—Ä—Ç—Å–º–µ–Ω–æ–≤
        </button>
    </div>

    <!-- –ù–∏–∂–Ω–µ–µ –º–µ–Ω—é -->
    <div class="bottom-nav">
        <div class="nav-item active" onclick="goGuestHome()">üè†</div>
        <div class="nav-item" onclick="openAIChat()">ü§ñ</div>
        <div class="nav-item" onclick="openGuestEvents()">üìÖ</div>
        <div class="nav-item" onclick="openGuestResults()">üèÖ</div>
        <div class="nav-item" onclick="openGuestProfile()">üë§</div>
    </div>
</div>



<!-- ============================
    –ü–†–û–§–ò–õ–¨ –°–û–¢–†–£–î–ù–ò–ö–ê
============================= -->
<div id="employeeProfile" class="screen">
    <h2 class="screen-title">–ü—Ä–æ—Ñ–∏–ª—å</h2>

    <div class="profile-block">
        <div class="profile-label">–î–æ–ª–∂–Ω–æ—Å—Ç—å:</div>
        <div id="profileRole"></div>

        <div class="profile-label">–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è:</div>
        <div id="profileOrg"></div>
    </div>

    <button class="btn primary wide" onclick="openDatabase()">–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö</button>
    <button class="btn secondary wide" onclick="resetEmployee()">–°–º–µ–Ω–∏—Ç—å –¥–æ–ª–∂–Ω–æ—Å—Ç—å</button>
    <button class="btn danger wide" onclick="logout()">–í—ã–π—Ç–∏</button>

    <div class="bottom-nav">
        <div class="nav-item" onclick="goEmployeeHome()">üè†</div>
        <div class="nav-item" onclick="openTasksScreen()">üìù</div>
        <div class="nav-item" onclick="openDatabase()">üìö</div>
        <div class="nav-item" onclick="openAIChat()">ü§ñ</div>
        <div class="nav-item active" onclick="openProfile()">üë§</div>
    </div>
</div>



<!-- ============================
     –ü–†–û–§–ò–õ–¨ –ì–û–°–¢–Ø
============================= -->
<div id="guestProfile" class="screen">
    <h2 class="screen-title">–í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ</h2>

    <div class="form">
        <label>–§–ò–û</label>
        <input id="guestFio" type="text">

        <label>–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞</label>
        <input id="guestPhone" type="text">

        <label>–ò–ò–ù</label>
        <input id="guestIin" type="text">
    </div>

    <button class="btn primary wide" onclick="saveGuestProfile()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
    <button class="btn danger wide" onclick="logout()">–í—ã–π—Ç–∏</button>

    <div class="bottom-nav">
        <div class="nav-item" onclick="goGuestHome()">üè†</div>
        <div class="nav-item" onclick="openAIChat()">ü§ñ</div>
        <div class="nav-item" onclick="openGuestEvents()">üìÖ</div>
        <div class="nav-item" onclick="openGuestResults()">üèÖ</div>
        <div class="nav-item active" onclick="openGuestProfile()">üë§</div>
    </div>
</div>



<!-- ============================
     –≠–ö–†–ê–ù –ò–ò –ß–ê–¢–ê
============================= -->
<div id="aiScreen" class="screen">
    <h2 class="screen-title">–ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç</h2>

    <div id="aiChat" class="chat-container"></div>

    <div class="chat-input-box">
        <input type="text" id="aiMessage" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–æ–ø—Ä–æ—Å...">
        <button onclick="sendAI()">‚û§</button>
    </div>

    <button class="btn secondary wide" onclick="backFromAI()">–ù–∞–∑–∞–¥</button>
</div>



<!-- ============================
     –≠–ö–†–ê–ù –°–û–ó–î–ê–ù–ò–Ø –ü–û–†–£–ß–ï–ù–ò–Ø
============================= -->
<div id="createTaskScreen" class="screen">
    <h2 class="screen-title">–ù–æ–≤–æ–µ –ø–æ—Ä—É—á–µ–Ω–∏–µ</h2>

    <div class="form">
        <label>–ö–æ–º—É</label>
        <select id="taskTarget"></select>

        <label>–û–ø–∏—Å–∞–Ω–∏–µ</label>
        <textarea id="taskDescription"></textarea>

        <label>–î–µ–¥–ª–∞–π–Ω</label>
        <input type="date" id="taskDeadline">
    </div>

    <h3>–¢–∞–±–ª–∏—Ü–∞</h3>
    <div id="tableEditor" class="table-editor">
        <!-- –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è JS -->
    </div>

    <button class="btn secondary" onclick="addTableRow()">–î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–æ–∫—É</button>
    <button class="btn secondary" onclick="addTableColumn()">–î–æ–±–∞–≤–∏—Ç—å —Å—Ç–æ–ª–±–µ—Ü</button>

    <button class="btn primary wide" onclick="saveTask()">–°–æ–∑–¥–∞—Ç—å –ø–æ—Ä—É—á–µ–Ω–∏–µ</button>
    <button class="btn secondary wide" onclick="backFromCreateTask()">–ù–∞–∑–∞–¥</button>
</div>



<!-- ============================
     –≠–ö–†–ê–ù –°–ü–ò–°–ö–ê –ü–û–†–£–ß–ï–ù–ò–ô
============================= -->
<div id="tasksScreen" class="screen">
    <h2 class="screen-title">–ü–æ—Ä—É—á–µ–Ω–∏—è</h2>

    <div id="tasksList" class="list-container"></div>

    <button class="btn secondary wide" onclick="goEmployeeHome()">–ù–∞–∑–∞–¥</button>
</div>



<!-- ============================
     –≠–ö–†–ê–ù –ë–ê–ó–´ –î–ê–ù–ù–´–•
============================= -->
<div id="databaseScreen" class="screen">
    <h2 class="screen-title">–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö</h2>

    <div id="dbSectionList" class="db-list">
        <!-- –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è -->
    </div>

    <button class="btn secondary wide" onclick="addDbSection()">–î–æ–±–∞–≤–∏—Ç—å —Ä–∞–∑–¥–µ–ª</button>
    <button class="btn secondary wide" onclick="goEmployeeHome()">–ù–∞–∑–∞–¥</button>
</div>


<script>
/* ============================================================
   –ì–õ–û–ë–ê–õ–¨–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï
============================================================ */

let MODE = null; // employee / guest

let currentOrganization = null;
let currentRole = null;

let employeeDB = {};        // –¥–∞–Ω–Ω—ã–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ø–æ —Ä–∞–∑–¥–µ–ª–∞–º
let tasks = [];             // —Å–ø–∏—Å–æ–∫ –ø–æ—Ä—É—á–µ–Ω–∏–π

let table = {
    columns: ["–ö–æ–ª–æ–Ω–∫–∞ 1"],
    rows: [ [""] ]
};


/* ============================================================
   –£–¢–ò–õ–ò–¢–´
============================================================ */

function showScreen(id) {
    document.querySelectorAll(".screen").forEach(s => s.classList.remove("active"));
    document.getElementById(id).classList.add("active");
}

function saveLocal(key, value) {
    localStorage.setItem(key, JSON.stringify(value));
}

function loadLocal(key, def = null) {
    const v = localStorage.getItem(key);
    return v ? JSON.parse(v) : def;
}


/* ============================================================
   –ó–ê–ü–£–°–ö –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø
============================================================ */

window.onload = () => {
    // –∑–∞–≥—Ä—É–∂–∞–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
    employeeDB = loadLocal("employeeDB", {});
    tasks = loadLocal("tasksList", []);

    const guestData = loadLocal("guestProfile", null);
    if (guestData) {
        document.getElementById("guestFio").value = guestData.fio;
        document.getElementById("guestPhone").value = guestData.phone;
        document.getElementById("guestIin").value = guestData.iin;
    }
};


/* ============================================================
   1. –í–´–ë–û–† –†–ï–ñ–ò–ú–ê
============================================================ */

function selectMode(mode) {
    MODE = mode;

    if (mode === "employee") {
        showOrganizationList();
        showScreen("orgSelectScreen");
    } else {
        showScreen("guestHome");
    }
}

function backToMode() {
    showScreen("modeScreen");
}


/* ============================================================
   2. –°–ü–ò–°–ö–ò –û–†–ì–ê–ù–ò–ó–ê–¶–ò–ô –ò –î–û–õ–ñ–ù–û–°–¢–ï–ô
============================================================ */

// –≤–µ—Å—å —Å–ø–∏—Å–æ–∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π
const ORGANIZATIONS = [
    { type: "main", name: "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–π –∫—É–ª—å—Ç—É—Ä—ã –∏ —Å–ø–æ—Ä—Ç–∞ –ö–∞—Ä–∞–≥–∞–Ω–¥–∏–Ω—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏" },

    { type: "region", name: "–û—Ç–¥–µ–ª —Å–ø–æ—Ä—Ç–∞ –≥. –ö–∞—Ä–∞–≥–∞–Ω–¥–∞" },
    { type: "region", name: "–û—Ç–¥–µ–ª —Å–ø–æ—Ä—Ç–∞ –≥. –¢–µ–º–∏—Ä—Ç–∞—É" },
    { type: "region", name: "–û—Ç–¥–µ–ª —Å–ø–æ—Ä—Ç–∞ –≥. –ë–∞–ª—Ö–∞—à" },
    { type: "region", name: "–û—Ç–¥–µ–ª —Å–ø–æ—Ä—Ç–∞ –≥. –°–∞—Ä–∞–Ω—å" },
    { type: "region", name: "–û—Ç–¥–µ–ª —Å–ø–æ—Ä—Ç–∞ –≥. –®–∞—Ö—Ç–∏–Ω—Å–∫" },
    { type: "region", name: "–û—Ç–¥–µ–ª —Å–ø–æ—Ä—Ç–∞ –≥. –ü—Ä–∏–æ–∑–µ—Ä—Å–∫" },
    { type: "region", name: "–û—Ç–¥–µ–ª —Å–ø–æ—Ä—Ç–∞ –ê–±–∞–π—Å–∫–æ–≥–æ —Ä–∞–π–æ–Ω–∞" },
    { type: "region", name: "–û—Ç–¥–µ–ª —Å–ø–æ—Ä—Ç–∞ –ê–∫—Ç–æ–≥–∞–π—Å–∫–æ–≥–æ —Ä–∞–π–æ–Ω–∞" },
    { type: "region", name: "–û—Ç–¥–µ–ª —Å–ø–æ—Ä—Ç–∞ –ë—É—Ö–∞—Ä-–ñ—ã—Ä–∞—É—Å–∫–æ–≥–æ —Ä–∞–π–æ–Ω–∞" },
    { type: "region", name: "–û—Ç–¥–µ–ª —Å–ø–æ—Ä—Ç–∞ –ö–∞—Ä–∫–∞—Ä–∞–ª–∏–Ω—Å–∫–æ–≥–æ —Ä–∞–π–æ–Ω–∞" },
    { type: "region", name: "–û—Ç–¥–µ–ª —Å–ø–æ—Ä—Ç–∞ –û—Å–∞–∫–∞—Ä–æ–≤—Å–∫–æ–≥–æ —Ä–∞–π–æ–Ω–∞" },
    { type: "region", name: "–û—Ç–¥–µ–ª —Å–ø–æ—Ä—Ç–∞ –ù—É—Ä–∏–Ω—Å–∫–æ–≥–æ —Ä–∞–π–æ–Ω–∞" },
    { type: "region", name: "–û—Ç–¥–µ–ª —Å–ø–æ—Ä—Ç–∞ –®–µ—Ç—Å–∫–æ–≥–æ —Ä–∞–π–æ–Ω–∞" },

    { type: "org", name: "–û–°–î–Æ–®–û–† ‚Ññ1" },
    { type: "org", name: "–û–°–î–Æ–®–û–† ‚Ññ2" },
    { type: "org", name: "–û–°–î–Æ–®–û–† ‚Ññ3" },
    { type: "org", name: "–°–î–Æ–®–û–† ‚Ññ1" },
    { type: "org", name: "–°–î–Æ–®–û–† ‚Ññ2" },
    { type: "org", name: "–î–Æ–°–® ‚Ññ1" },
    { type: "org", name: "–î–Æ–°–® ‚Ññ2" },
    { type: "org", name: "–î–Æ–°–® ‚Ññ3" },
    { type: "org", name: "–û–°–®–ò–ö–û–†" },
    { type: "org", name: "–¶–ü–û–†" },
    { type: "org", name: "–®–í–°–ú (–æ–ª–∏–º–ø.)" },
    { type: "org", name: "–®–í–°–ú (–Ω–µ–æ–ª–∏–º–ø.)" },
    { type: "org", name: "–¶–µ–Ω—Ç—Ä –º–∞—Å—Å–æ–≤–æ–≥–æ —Å–ø–æ—Ä—Ç–∞" },
    { type: "org", name: "–§–∏–∑–∫—É–ª—å—Ç—É—Ä–Ω—ã–π –¥–∏—Å–ø–∞–Ω—Å–µ—Ä" },
];


// –¥–æ–ª–∂–Ω–æ—Å—Ç–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
const ROLES_MAIN = [
    "–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è",
    "–ó–∞–º–µ—Å—Ç–∏—Ç–µ–ª—å —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è",
    "–ì–ª–∞–≤–Ω—ã–π —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ –∫–∞–¥—Ä–æ–≤—ã–º –≤–æ–ø—Ä–æ—Å–∞–º",
    "–ì–ª–∞–≤–Ω—ã–π —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω–æ-–ø—Ä–∞–≤–æ–≤–æ–π —Ä–∞–±–æ—Ç–µ",
    "–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –æ—Ç–¥–µ–ª–∞ —ç–∫–æ–Ω–æ–º–∏–∫–∏",
    "–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –æ—Ç–¥–µ–ª–∞ —Å–ø–æ—Ä—Ç–∞ –≤—ã—Å—à–∏—Ö –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π",
    "–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –æ—Ç–¥–µ–ª–∞ —Ñ–∏–∑–∫—É–ª—å—Ç—É—Ä–Ω–æ-–º–∞—Å—Å–æ–≤–æ–π —Ä–∞–±–æ—Ç—ã",
    "–ì–ª–∞–≤–Ω—ã–π —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç —Ä–∞–∑–≤–∏—Ç–∏—è –º–∞—Å—Å–æ–≤–æ–≥–æ –∏ –∏–Ω–≤–∞–ª–∏–¥–Ω–æ–≥–æ —Å–ø–æ—Ä—Ç–∞",
    "–ì–ª–∞–≤–Ω—ã–π —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç —Ä–∞–∑–≤–∏—Ç–∏—è —Å–ø–æ—Ä—Ç–∏–≤–Ω–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã",
    "–ü—Ä–∏–∫–æ–º–∞–Ω–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç (–ö–∞—Å–µ–Ω–æ–≤ –ï.–ö.)",
    "–ü—Ä–∏–∫–æ–º–∞–Ω–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç (–ñ–∞–ø–ø–∞—Ä–æ–≤–∞ –ö.–¢.)",
    "–ü—Ä–∏–∫–æ–º–∞–Ω–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –Ω–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –≤–∏–¥–æ–≤ —Å–ø–æ—Ä—Ç–∞ (–ï—Å–º–∞–≥–∞–º–±–µ—Ç–æ–≤ –ú.–ú.)"
];

// –¥–æ–ª–∂–Ω–æ—Å—Ç–∏ –¥–ª—è –ø–æ–¥–≤–µ–¥–æ–º—Å—Ç–≤–µ–Ω–Ω—ã—Ö –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π (–ø—Ä–∏–º–µ—Ä)
const ORG_DEFAULT_ROLES = [
    "–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏",
    "–ì–ª–∞–≤–Ω—ã–π —Ç—Ä–µ–Ω–µ—Ä",
    "–°—Ç–∞—Ä—à–∏–π —Ç—Ä–µ–Ω–µ—Ä",
    "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä",
    "–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ —Å–ø–æ—Ä—Ç—É",
    "–ú–µ—Ç–æ–¥–∏—Å—Ç"
];


function showOrganizationList() {
    const container = document.getElementById("organizationList");
    container.innerHTML = "";

    ORGANIZATIONS.forEach(org => {
        const div = document.createElement("div");
        div.className = "list-item";
        div.innerHTML = `
            <div class="list-item-title">${org.name}</div>
            <div class="list-item-sub">${org.type === "main" ? "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ" :
                                        org.type === "region" ? "–†–µ–≥–∏–æ–Ω" :
                                        "–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è"}</div>
        `;
        div.onclick = () => selectOrganization(org);
        container.appendChild(div);
    });
}

function selectOrganization(org) {
    currentOrganization = org.name;
    showRolesForOrganization();
    showScreen("roleSelectScreen");
}

function backToOrg() {
    showScreen("orgSelectScreen");
}

function showRolesForOrganization() {
    const container = document.getElementById("roleList");
    container.innerHTML = "";

    let roles = [];
    if (currentOrganization.includes("–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ")) roles = ROLES_MAIN;
    else roles = ORG_DEFAULT_ROLES;

    roles.forEach(role => {
        const div = document.createElement("div");
        div.className = "list-item";
        div.innerHTML = `
            <div class="list-item-title">${role}</div>
            <div class="list-item-sub">–î–æ–ª–∂–Ω–æ—Å—Ç—å</div>
        `;
        div.onclick = () => selectRole(role);
        container.appendChild(div);
    });
}


function selectRole(role) {
    currentRole = role;

    document.getElementById("empRole").innerText = role;
    document.getElementById("empOrg").innerText = currentOrganization;
    document.getElementById("profileRole").innerText = role;
    document.getElementById("profileOrg").innerText = currentOrganization;

    showScreen("employeeHome");
}


/* ============================================================
   3. –ü–†–û–§–ò–õ–¨ –ì–û–°–¢–Ø
============================================================ */

function openGuestProfile() {
    showScreen("guestProfile");
}

function saveGuestProfile() {
    const fio = document.getElementById("guestFio").value.trim();
    const phone = document.getElementById("guestPhone").value.trim();
    const iin = document.getElementById("guestIin").value.trim();

    if (!fio || !phone || !iin) {
        alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è");
        return;
    }

    const data = { fio, phone, iin };
    saveLocal("guestProfile", data);

    alert("–î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã");
    showScreen("guestHome");
}


/* ============================================================
   4. –ù–ò–ñ–ù–ï–ï –ú–ï–ù–Æ –°–û–¢–†–£–î–ù–ò–ö–ê
============================================================ */

function goEmployeeHome() {
    showScreen("employeeHome");
}

function openProfile() {
    showScreen("employeeProfile");
}

function openDatabase() {
    buildDatabaseList();
    showScreen("databaseScreen");
}

function openTasksScreen() {
    renderTasks();
    showScreen("tasksScreen");
}

function openAIChat() {
    showScreen("aiScreen");
}


/* ============================================================
   5. –ù–ò–ñ–ù–ï–ï –ú–ï–ù–Æ –ì–û–°–¢–Ø
============================================================ */

function goGuestHome() {
    showScreen("guestHome");
}

function openGuestEvents() {
    alert("–î–∞–Ω–Ω—ã–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π –±–µ—Ä—É—Ç—Å—è –∏–∑ –æ–±—â–µ–π –±–∞–∑—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤");
}

function openGuestSections() {
    alert("–î–∞–Ω–Ω—ã–µ —Å–µ–∫—Ü–∏–π –±–µ—Ä—É—Ç—Å—è –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏");
}

function openGuestResults() {
    alert("–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–ø–æ—Ä—Ç—Å–º–µ–Ω–æ–≤ –±–µ—Ä—É—Ç—Å—è –∏–∑ –±–∞–∑—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤");
}


/* ============================================================
   6. –ë–ê–ó–ê –î–ê–ù–ù–´–• (–°–û–¢–†–£–î–ù–ò–ö)
============================================================ */

function buildDatabaseList() {
    const container = document.getElementById("dbSectionList");
    container.innerHTML = "";

    if (!employeeDB[currentRole]) employeeDB[currentRole] = [];

    employeeDB[currentRole].forEach((sec, index) => {
        const div = document.createElement("div");
        div.className = "db-section";
        div.innerHTML = `
            <input 
                type="text" 
                value="${sec.title}" 
                oninput="updateDbTitle(${index}, this.value)"
            >
            <textarea oninput="updateDbText(${index}, this.value)">${sec.text}</textarea>
        `;
        container.appendChild(div);
    });

    saveLocal("employeeDB", employeeDB);
}

function addDbSection() {
    if (!employeeDB[currentRole]) employeeDB[currentRole] = [];

    employeeDB[currentRole].push({
        title: "–ù–æ–≤—ã–π —Ä–∞–∑–¥–µ–ª",
        text: ""
    });

    buildDatabaseList();
}

function updateDbTitle(index, value) {
    employeeDB[currentRole][index].title = value;
    saveLocal("employeeDB", employeeDB);
}

function updateDbText(index, value) {
    employeeDB[currentRole][index].text = value;
    saveLocal("employeeDB", employeeDB);
}


/* ============================================================
   7. –ò–ò –ß–ê–¢
============================================================ */

function sendAI() {
    const input = document.getElementById("aiMessage");
    const text = input.value.trim();
    if (!text) return;

    addAIMessage("user", text);
    input.value = "";

    setTimeout(() => {
        const answer = generateAIAnswer(text);
        addAIMessage("bot", answer);
    }, 300);
}

function addAIMessage(type, text) {
    const chat = document.getElementById("aiChat");

    const div = document.createElement("div");
    div.className = `chat-message ${type}`;
    div.innerHTML = `<div class="chat-bubble">${text}</div>`;

    chat.appendChild(div);
    chat.scrollTop = chat.scrollHeight;
}

function generateAIAnswer(q) {
    // –ò–ò –∏—â–µ—Ç –æ—Ç–≤–µ—Ç –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
    let base = employeeDB[currentRole] || [];

    let allText = base.map(x => x.title + " " + x.text).join(" ");

    if (!allText.trim()) {
        return "–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–∫–∞ –ø—É—Å—Ç–∞. –î–æ–±–∞–≤—å—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –ø—Ä–æ—Ñ–∏–ª—å.";
    }

    if (q.length < 4) return "–£—Ç–æ—á–Ω–∏—Ç–µ –≤–æ–ø—Ä–æ—Å.";

    if (allText.toLowerCase().includes(q.toLowerCase())) {
        return "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ –≤–∞—à–µ–º—É –∑–∞–ø—Ä–æ—Å—É –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:

" + allText.substring(0, 400);
    }

    return "–ú–Ω–µ –Ω–µ —É–¥–∞–ª–æ—Å—å –Ω–∞–π—Ç–∏ —Ç–æ—á–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞.";
}

function backFromAI() {
    if (MODE === "guest") showScreen("guestHome");
    else showScreen("employeeHome");
}


/* ============================================================
   8. –°–û–ó–î–ê–ù–ò–ï –ü–û–†–£–ß–ï–ù–ò–Ø + –¢–ê–ë–õ–ò–¶–ê
============================================================ */

function openCreateTask() {
    initTableEditor();
    buildTaskTargets();
    showScreen("createTaskScreen");
}

function backFromCreateTask() {
    showScreen("employeeHome");
}

function buildTaskTargets() {
    const select = document.getElementById("taskTarget");
    select.innerHTML = "";

    ORGANIZATIONS.forEach(o => {
        const opt = document.createElement("option");
        opt.value = o.name;
        opt.textContent = o.name;
        select.appendChild(opt);
    });
}

function initTableEditor() {
    renderTable();
}

function addTableRow() {
    table.rows.push(Array(table.columns.length).fill(""));
    renderTable();
}

function addTableColumn() {
    table.columns.push("–ö–æ–ª–æ–Ω–∫–∞ " + (table.columns.length + 1));
    table.rows = table.rows.map(r => [...r, ""]);
    renderTable();
}

function renderTable() {
    const div = document.getElementById("tableEditor");
    div.innerHTML = "";

    const tableEl = document.createElement("table");

    const thead = document.createElement("thead");
    const tr = document.createElement("tr");
    table.columns.forEach((col, i) => {
        const th = document.createElement("th");
        th.innerHTML = `
            <input 
                value="${col}" 
                oninput="renameColumn(${i}, this.value)"
            >
        `;
        tr.appendChild(th);
    });
    thead.appendChild(tr);
    tableEl.appendChild(thead);

    const tbody = document.createElement("tbody");
    table.rows.forEach((row, ri) => {
        const tr = document.createElement("tr");
        row.forEach((cell, ci) => {
            const td = document.createElement("td");
            td.innerHTML = `
                <input 
                    value="${cell}" 
                    oninput="editCell(${ri}, ${ci}, this.value)"
                >
            `;
            tr.appendChild(td);
        });
        tbody.appendChild(tr);
    });
    tableEl.appendChild(tbody);

    div.appendChild(tableEl);
}

function renameColumn(i, value) {
    table.columns[i] = value;
}

function editCell(r, c, value) {
    table.rows[r][c] = value;
}

function saveTask() {
    const task = {
        id: Date.now(),
        target: document.getElementById("taskTarget").value,
        description: document.getElementById("taskDescription").value,
        deadline: document.getElementById("taskDeadline").value,
        table: JSON.parse(JSON.stringify(table))
    };

    tasks.push(task);
    saveLocal("tasksList", tasks);

    alert("–ü–æ—Ä—É—á–µ–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–æ");

    showScreen("employeeHome");
    renderTasks();
}


/* ============================================================
   9. –°–ü–ò–°–û–ö –ü–û–†–£–ß–ï–ù–ò–ô
============================================================ */

function renderTasks() {
    const list = document.getElementById("tasksList");
    list.innerHTML = "";

    tasks.forEach(t => {
        const card = document.createElement("div");
        card.className = "task-card";
        card.innerHTML = `
            <div class="task-title">${t.description}</div>
            <div class="task-meta">–ö–æ–º—É: ${t.target}</div>
            <div class="task-meta">–î–µ–¥–ª–∞–π–Ω: ${t.deadline}</div>
        `;
        list.appendChild(card);
    });
}


/* ============================================================
   10. –í–´–•–û–î –ò –°–ë–†–û–°
============================================================ */

function resetEmployee() {
    currentRole = null;
    currentOrganization = null;
    showScreen("modeScreen");
}

function logout() {
    MODE = null;
    showScreen("modeScreen");
}
</script>

</body>
</html>
