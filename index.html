<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <title>–£–§–ö–∏–° –ö–∞—Ä–∞–≥–∞–Ω–¥–∏–Ω—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏ ‚Äî –°–ª—É–∂–µ–±–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" href="style.css" />

    <!-- Telegram WebApp -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>

<!-- =================== –≠–ö–†–ê–ù –í–´–ë–û–†–ê –†–ï–ñ–ò–ú–ê =================== -->
<div id="modeScreen" class="screen active">
    <div class="card welcome-card">
        <div class="welcome-logo-wrap">
            <img src="img/karaganda_gerb.jpeg" alt="–ì–µ—Ä–±" class="welcome-logo" />
        </div>
        <h1 class="welcome-title">–°–ª—É–∂–µ–±–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞</h1>
        <p class="welcome-subtitle">
            –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–π –∫—É–ª—å—Ç—É—Ä—ã –∏ —Å–ø–æ—Ä—Ç–∞ –ö–∞—Ä–∞–≥–∞–Ω–¥–∏–Ω—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏
        </p>

        <div class="welcome-buttons">
            <button class="btn btn-primary" onclick="selectMode('employee')">
                –Ø —Å–æ—Ç—Ä—É–¥–Ω–∏–∫
            </button>
            <button class="btn btn-secondary" onclick="selectMode('guest')">
                –Ø –≥–æ—Å—Ç—å
            </button>
        </div>
    </div>
</div>

<!-- =================== –≠–ö–†–ê–ù –ö–ê–¢–ï–ì–û–†–ò–ò –°–û–¢–†–£–î–ù–ò–ö–ê =================== -->
<div id="employeeCategoryScreen" class="screen">
    <div class="top-bar">
        <button class="top-back" onclick="showScreen('modeScreen')">‚Üê –ù–∞–∑–∞–¥</button>
        <div class="top-title">–í—ã–±–æ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</div>
    </div>

    <div class="menu-list">

        <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ -->
        <button class="menu-btn" onclick="selectEmployeeCategory('management')">
            <div class="menu-btn-icon">
                <img src="img/icon-category-management.svg" width="22" height="22" />
            </div>
            <div class="menu-btn-text">
                <div class="menu-btn-title">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</div>
                <div class="menu-btn-subtitle">–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –∏ –æ—Ç–¥–µ–ª—ã –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è</div>
            </div>
        </button>

        <!-- –ü–æ–¥–≤–µ–¥–æ–º—Å—Ç–≤–µ–Ω–Ω—ã–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ -->
        <button class="menu-btn" onclick="selectEmployeeCategory('org')">
            <div class="menu-btn-icon">
                <img src="img/icon-category-org.svg" width="22" height="22" />
            </div>
            <div class="menu-btn-text">
                <div class="menu-btn-title">–ü–æ–¥–≤–µ–¥–æ–º—Å—Ç–≤–µ–Ω–Ω—ã–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏</div>
                <div class="menu-btn-subtitle">–î–Æ–°–®, –û–°–î–Æ–®–û–†, —Ü–µ–Ω—Ç—Ä—ã –∏ –¥—Ä.</div>
            </div>
        </button>

        <!-- –†–∞–π–æ–Ω—ã –∏ –≥–æ—Ä–æ–¥–∞ -->
        <button class="menu-btn" onclick="selectEmployeeCategory('region')">
            <div class="menu-btn-icon">
                <img src="img/icon-category-region.svg" width="22" height="22" />
            </div>
            <div class="menu-btn-text">
                <div class="menu-btn-title">–û—Ç–¥–µ–ª—ã —Å–ø–æ—Ä—Ç–∞</div>
                <div class="menu-btn-subtitle">–ì–æ—Ä–æ–¥–∞ –∏ —Ä–∞–π–æ–Ω—ã –æ–±–ª–∞—Å—Ç–∏</div>
            </div>
        </button>

    </div>
</div>

<!-- =================== –í–´–ë–û–† –û–†–ì–ê–ù–ò–ó–ê–¶–ò–ò =================== -->
<div id="orgSelectScreen" class="screen">
    <div class="top-bar">
        <button class="top-back" onclick="showScreen('employeeCategoryScreen')">‚Üê –ù–∞–∑–∞–¥</button>
        <div class="top-title">–í—ã–±–æ—Ä –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏</div>
    </div>
    <div id="organizationList" class="list"></div>
</div>

<!-- =================== –í–´–ë–û–† –û–¢–î–ï–õ–ê =================== -->
<div id="deptSelectScreen" class="screen">
    <div class="top-bar">
        <button class="top-back" onclick="showScreen('orgSelectScreen')">‚Üê –ù–∞–∑–∞–¥</button>
        <div class="top-title">–í—ã–±–æ—Ä –æ—Ç–¥–µ–ª–∞</div>
    </div>
    <div id="departmentList" class="list"></div>
</div>

<!-- =================== –í–´–ë–û–† –°–û–¢–†–£–î–ù–ò–ö–ê =================== -->
<div id="roleSelectScreen" class="screen">
    <div class="top-bar">
        <button class="top-back" onclick="backFromRole()">‚Üê –ù–∞–∑–∞–¥</button>
        <div class="top-title">–í—ã–±–æ—Ä —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</div>
    </div>
    <div id="roleList" class="list"></div>
</div>

<!-- =================== –ì–õ–ê–í–ù–´–ô –≠–ö–†–ê–ù –°–û–¢–†–£–î–ù–ò–ö–ê =================== -->
<div id="employeeHome" class="screen">

    <div class="header">

        <div class="header-logo-circle">
            <img src="img/karaganda_gerb.jpeg" class="header-logo" />
        </div>

        <div class="header-text">
            <div class="header-org">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–π –∫—É–ª—å—Ç—É—Ä—ã –∏ —Å–ø–æ—Ä—Ç–∞</div>
            <div id="empDepartment" class="header-dept">–û—Ç–¥–µ–ª</div>
        </div>

        <div class="theme-toggle-btn" onclick="toggleTheme()">
            <img id="theme-icon" src="img/sun.svg" />
        </div>

    </div>

    <div class="avatar-layout">

        <div class="avatar-left">
            <div class="avatar-circle">
                <img id="employeeAvatarImg" />
                <span id="employeeAvatarPlaceholder">üë§</span>
            </div>

            <button class="btn btn-secondary btn-small" onclick="triggerEmployeePhoto()">
                –ò–∑–º–µ–Ω–∏—Ç—å —Ñ–æ—Ç–æ
            </button>
            <input id="employeeAvatarInput" type="file" accept="image/*" style="display:none"
                onchange="handleEmployeePhoto(this)" />
        </div>

        <div class="avatar-right">
            <div id="empRole" class="emp-role">–î–æ–ª–∂–Ω–æ—Å—Ç—å</div>
            <div id="empFio" class="emp-fio">–§–ò–û</div>
        </div>

    </div>

    <div class="menu-list">

        <!-- –°–æ–∑–¥–∞—Ç—å –ø–æ—Ä—É—á–µ–Ω–∏–µ -->
        <button class="menu-btn" onclick="openCreateTask()">
            <div class="menu-btn-icon">
                <img src="img/icon-task.svg" width="22" height="22" />
            </div>
            <div class="menu-btn-text">
                <div class="menu-btn-title">–°–æ–∑–¥–∞—Ç—å –ø–æ—Ä—É—á–µ–Ω–∏–µ</div>
                <div class="menu-btn-subtitle">–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Ä—É—á–µ–Ω–∏—è —Å —Ç–∞–±–ª–∏—Ü–µ–π –∏ –¥–µ–¥–ª–∞–π–Ω–æ–º</div>
            </div>
        </button>

        <!-- –ü–æ—Ä—É—á–µ–Ω–∏—è -->
        <button class="menu-btn" onclick="openTasksScreen()">
            <div class="menu-btn-icon">
                <img src="img/icon-list.svg" width="22" height="22" />
            </div>
            <div class="menu-btn-text">
                <div class="menu-btn-title">–ü–æ—Ä—É—á–µ–Ω–∏—è</div>
                <div class="menu-btn-subtitle">–°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ—Ä—É—á–µ–Ω–∏–π</div>
            </div>
        </button>

        <!-- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö -->
        <button class="menu-btn" onclick="openDatabase()">
            <div class="menu-btn-icon">
                <img src="img/icon-database.svg" width="22" height="22" />
            </div>
            <div class="menu-btn-text">
                <div class="menu-btn-title">–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö</div>
                <div class="menu-btn-subtitle">–†–∞–∑–¥–µ–ª—ã –ø–æ –≤–∞—à–µ–º—É –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—é</div>
            </div>
        </button>

        <!-- –ò–ò –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç -->
        <button class="menu-btn" onclick="openAIChat()">
            <div class="menu-btn-icon">
                <img src="img/icon-ai.svg" width="22" height="22" />
            </div>
            <div class="menu-btn-text">
                <div class="menu-btn-title">–ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç</div>
                <div class="menu-btn-subtitle">–û—Ç–≤–µ—Ç—ã –ø–æ –≤–∞—à–µ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö</div>
            </div>
        </button>

        <!-- –ü—Ä–æ—Ñ–∏–ª—å -->
        <button class="menu-btn" onclick="openEmployeeProfile()">
            <div class="menu-btn-icon">
                <img src="img/icon-user.svg" width="22" height="22" />
            </div>
            <div class="menu-btn-text">
                <div class="menu-btn-title">–ü—Ä–æ—Ñ–∏–ª—å</div>
                <div class="menu-btn-subtitle">–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è, –¥–æ–ª–∂–Ω–æ—Å—Ç—å, —Ñ–æ—Ç–æ</div>
            </div>
        </button>

    </div>

</div>

<!-- =================== –ü–†–û–§–ò–õ–¨ –°–û–¢–†–£–î–ù–ò–ö–ê =================== -->
<div id="employeeProfile" class="screen">
    <div class="top-bar">
        <button class="top-back" onclick="goEmployeeHome()">‚Üê –ù–∞–∑–∞–¥</button>
        <div class="top-title">–ü—Ä–æ—Ñ–∏–ª—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</div>
    </div>

    <div class="avatar-block">
        <div class="avatar-circle">
            <img id="employeeAvatarImg_profile" />
            <span id="employeeAvatarPlaceholder_profile">üë§</span>
        </div>
        <button class="btn btn-secondary btn-small" onclick="triggerEmployeePhoto()">–ò–∑–º–µ–Ω–∏—Ç—å —Ñ–æ—Ç–æ</button>
    </div>

    <div class="profile-card">
        <div class="profile-label">–û—Ç–¥–µ–ª</div>
        <div id="profileOrg">‚Äî</div>

        <div class="profile-label">–î–æ–ª–∂–Ω–æ—Å—Ç—å</div>
        <div id="profileRole">‚Äî</div>

        <div class="profile-label">–§–ò–û</div>
        <div id="profileFio">‚Äî</div>
    </div>

    <button class="btn btn-danger full" onclick="resetEmployee()">–í—ã–π—Ç–∏</button>
</div>

<!-- =================== –ë–ê–ó–ê –î–ê–ù–ù–´–• =================== -->
<div id="databaseScreen" class="screen">
    <div class="top-bar">
        <button class="top-back" onclick="goEmployeeHome()">‚Üê –ù–∞–∑–∞–¥</button>
        <div class="top-title">–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö</div>
    </div>

    <div id="dbSectionList" class="db-list"></div>

    <button class="btn btn-primary full" onclick="addDbSection()">–î–æ–±–∞–≤–∏—Ç—å —Ä–∞–∑–¥–µ–ª</button>
</div>

<!-- =================== –°–û–ó–î–ê–ù–ò–ï –ü–û–†–£–ß–ï–ù–ò–Ø =================== -->
<div id="createTaskScreen" class="screen">
    <div class="top-bar">
        <button class="top-back" onclick="goEmployeeHome()">‚Üê –ù–∞–∑–∞–¥</button>
        <div class="top-title">–ù–æ–≤–æ–µ –ø–æ—Ä—É—á–µ–Ω–∏–µ</div>
    </div>

    <div class="form">
        <label>–ö–æ–º—É (–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è)</label>
        <select id="taskTarget"></select>

        <label>–ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫</label>
        <input id="taskTargetPerson" placeholder="–§–ò–û –∏–ª–∏ –¥–æ–ª–∂–Ω–æ—Å—Ç—å" />

        <label>–û–ø–∏—Å–∞–Ω–∏–µ –ø–æ—Ä—É—á–µ–Ω–∏—è</label>
        <textarea id="taskDescription" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –æ—Ç—á—ë—Ç..."></textarea>

        <label>–î–µ–¥–ª–∞–π–Ω</label>
        <input type="date" id="taskDeadline" />
    </div>

    <div class="sub-title">–¢–∞–±–ª–∏—Ü–∞ –ø–æ—Ä—É—á–µ–Ω–∏—è</div>
    <div id="tableEditor"></div>

    <div class="table-controls">
        <button class="btn btn-secondary" onclick="addTableColumn()">+ –°—Ç–æ–ª–±–µ—Ü</button>
        <button class="btn btn-secondary" onclick="addTableRow()">+ –°—Ç—Ä–æ–∫–∞</button>
    </div>

    <button class="btn btn-primary full" onclick="saveTask()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–æ—Ä—É—á–µ–Ω–∏–µ</button>
</div>

<!-- =================== –°–ü–ò–°–û–ö –ü–û–†–£–ß–ï–ù–ò–ô =================== -->
<div id="tasksScreen" class="screen">
    <div class="top-bar">
        <button class="top-back" onclick="goEmployeeHome()">‚Üê –ù–∞–∑–∞–¥</button>
        <div class="top-title">–ü–æ—Ä—É—á–µ–Ω–∏—è</div>
    </div>

    <div id="tasksList" class="tasks-list"></div>
</div>

<!-- =================== –ò–ò –ß–ê–¢ =================== -->
<div id="aiScreen" class="screen">
    <div class="top-bar">
        <button class="top-back" onclick="backFromAI()">‚Üê –ù–∞–∑–∞–¥</button>
        <div class="top-title">–ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç</div>
    </div>

    <div id="aiChat" class="chat-container"></div>

    <div class="chat-input-box">
        <input id="aiMessage" placeholder="–í–∞—à –≤–æ–ø—Ä–æ—Å..." />
        <button onclick="sendAI()">‚û§</button>
    </div>
</div>

<!-- =================== –ì–û–°–¢–¨ –≠–ö–†–ê–ù–´ =================== -->
<!-- (–æ—Å—Ç–∞–≤–ª–µ–Ω—ã –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π ‚Äî –∫–∞–∫ –≤ —Ç–≤–æ–µ–π –≤–µ—Ä—Å–∏–∏) -->


<!--  =================== –ú–û–î–ê–õ–ö–ê –§–ò–û =================== -->
<div id="fioModal" class="fio-modal hidden">
    <div class="fio-modal-backdrop"></div>

    <div class="fio-modal-window">
        <div class="fio-modal-title">–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ</div>
        <div class="fio-modal-subtitle">–≠—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è –≤—Ö–æ–¥–∞</div>

        <div class="form">
            <label>–§–∞–º–∏–ª–∏—è</label>
            <input id="fioLast" type="text" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ñ–∞–º–∏–ª–∏—é" />

            <label>–ò–º—è</label>
            <input id="fioFirst" type="text" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è" />

            <label>–û—Ç—á–µ—Å—Ç–≤–æ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
            <input id="fioMiddle" type="text" placeholder="–í–≤–µ–¥–∏—Ç–µ –æ—Ç—á–µ—Å—Ç–≤–æ" />
        </div>

        <button class="btn btn-primary full" onclick="saveEmployeeFio()">
            –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
        </button>
    </div>
</div>

<script src="script.js"></script>
</body>
</html>
