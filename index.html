<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <title>–£–§–ö–∏–° –ö–∞—Ä–∞–≥–∞–Ω–¥–∏–Ω—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏ ‚Äî –°–ª—É–∂–µ–±–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" href="style.css" />

    <!-- Telegram WebApp (–Ω–µ –º–µ—à–∞–µ—Ç –æ–±—ã—á–Ω–æ–º—É –±—Ä–∞—É–∑–µ—Ä—É) -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>

<!-- =================== –≠–ö–†–ê–ù –í–´–ë–û–†–ê –†–ï–ñ–ò–ú–ê =================== -->
<div id="modeScreen" class="screen active">
    <div class="card welcome-card">
        <div class="welcome-logo-wrap">
            <!-- –ì–µ—Ä–±: —Å–µ–π—á–∞—Å –ø—É—Ç—å img/karaganda_gerb.jpeg -->
            <img src="img/karaganda_gerb.jpeg" alt="–ì–µ—Ä–±" class="welcome-logo" />
        </div>
        <h1 class="welcome-title">–°–ª—É–∂–µ–±–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞</h1>
        <p className="welcome-subtitle">
            –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–π –∫—É–ª—å—Ç—É—Ä—ã –∏ —Å–ø–æ—Ä—Ç–∞ –ö–∞—Ä–∞–≥–∞–Ω–¥–∏–Ω—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏
        </p>

        <div class="welcome-buttons">
            <button class="btn btn-primary" onclick="selectMode('employee')">
                –Ø —Å–æ—Ç—Ä—É–¥–Ω–∏–∫
            </button>
            <button class="btn btn-secondary" onclick="selectMode('guest')">
                –Ø –≥–æ—Å—Ç—å
            </button>
        </div>
    </div>
</div>

<!-- =================== –≠–ö–†–ê–ù –í–´–ë–û–†–ê –û–†–ì–ê–ù–ò–ó–ê–¶–ò–ò =================== -->
<div id="orgSelectScreen" class="screen">
    <div class="top-bar">
        <button class="top-back" onclick="showScreen('modeScreen')">‚Üê –ù–∞–∑–∞–¥</button>
        <div class="top-title">–í—ã–±–æ—Ä –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏</div>
    </div>

    <div id="organizationList" class="list"></div>
</div>

<!-- =================== –≠–ö–†–ê–ù –í–´–ë–û–†–ê –û–¢–î–ï–õ–ê (–î–õ–Ø –£–ü–†–ê–í–õ–ï–ù–ò–Ø) =================== -->
<div id="deptSelectScreen" class="screen">
    <div class="top-bar">
        <button class="top-back" onclick="showScreen('orgSelectScreen')">‚Üê –ù–∞–∑–∞–¥</button>
        <div class="top-title">–í—ã–±–æ—Ä –æ—Ç–¥–µ–ª–∞</div>
    </div>

    <div id="departmentList" class="list"></div>
</div>

<!-- =================== –≠–ö–†–ê–ù –í–´–ë–û–†–ê –°–û–¢–†–£–î–ù–ò–ö–ê / –î–û–õ–ñ–ù–û–°–¢–ò =================== -->
<div id="roleSelectScreen" class="screen">
    <div class="top-bar">
        <button class="top-back" onclick="backFromRole()">‚Üê –ù–∞–∑–∞–¥</button>
        <div class="top-title">–í—ã–±–æ—Ä —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</div>
    </div>

    <div id="roleList" class="list"></div>
</div>

<!-- =================== –ì–õ–ê–í–ù–´–ô –≠–ö–†–ê–ù –°–û–¢–†–£–î–ù–ò–ö–ê =================== -->
<div id="employeeHome" class="screen">
    <div class="header">
        <div class="header-logo-circle">
            <img src="img/karaganda_gerb.jpeg" alt="–ì–µ—Ä–±" class="header-logo" />
        </div>
        <div class="header-text">
            <div id="empRole" class="header-role">–î–æ–ª–∂–Ω–æ—Å—Ç—å –Ω–µ –≤—ã–±—Ä–∞–Ω–∞</div>
            <div id="empOrg" class="header-org">–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è</div>
        </div>
    </div>

    <div class="menu-row">
        <button class="menu-pill" onclick="openCreateTask()">
            <span class="pill-icon">‚ûï</span>
            <span class="pill-label">–°–æ–∑–¥–∞—Ç—å –ø–æ—Ä—É—á–µ–Ω–∏–µ</span>
        </button>
        <button class="menu-pill" onclick="openTasksScreen()">
            <span class="pill-icon">üìù</span>
            <span class="pill-label">–ü–æ—Ä—É—á–µ–Ω–∏—è</span>
        </button>
        <button class="menu-pill" onclick="openDatabase()">
            <span class="pill-icon">üìö</span>
            <span class="pill-label">–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö</span>
        </button>
        <button class="menu-pill" onclick="openAIChat()">
            <span class="pill-icon">ü§ñ</span>
            <span class="pill-label">–ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç</span>
        </button>
    </div>

    <div class="bottom-nav">
        <div class="nav-item active" onclick="goEmployeeHome()">
            <span class="nav-icon">üè†</span>
            <span class="nav-label">–ì–ª–∞–≤–Ω–∞—è</span>
        </div>
        <div class="nav-item" onclick="openTasksScreen()">
            <span class="nav-icon">üìù</span>
            <span class="nav-label">–ü–æ—Ä—É—á–µ–Ω–∏—è</span>
        </div>
        <div class="nav-item" onclick="openDatabase()">
            <span class="nav-icon">üìö</span>
            <span class="nav-label">–ë–∞–∑–∞</span>
        </div>
        <div class="nav-item" onclick="openAIChat()">
            <span class="nav-icon">ü§ñ</span>
            <span class="nav-label">–ò–ò</span>
        </div>
        <div class="nav-item" onclick="openEmployeeProfile()">
            <span class="nav-icon">üë§</span>
            <span class="nav-label">–ü—Ä–æ—Ñ–∏–ª—å</span>
        </div>
    </div>
</div>

<!-- =================== –ü–†–û–§–ò–õ–¨ –°–û–¢–†–£–î–ù–ò–ö–ê =================== -->
<div id="employeeProfile" class="screen">
    <div class="top-bar">
        <button class="top-back" onclick="goEmployeeHome()">‚Üê –ù–∞–∑–∞–¥</button>
        <div class="top-title">–ü—Ä–æ—Ñ–∏–ª—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</div>
    </div>

    <div class="avatar-block">
        <div class="avatar-circle">
            <img id="employeeAvatarImg" alt="–ê–≤–∞—Ç–∞—Ä" />
            <span id="employeeAvatarPlaceholder">–§–æ—Ç–æ</span>
        </div>
        <button class="btn btn-secondary btn-small" onclick="triggerEmployeePhoto()">–ò–∑–º–µ–Ω–∏—Ç—å —Ñ–æ—Ç–æ</button>
        <input id="employeeAvatarInput" type="file" accept="image/*" capture="environment" style="display:none" onchange="handleEmployeePhoto(this)" />
    </div>

    <div class="profile-card">
        <div class="profile-label">–î–æ–ª–∂–Ω–æ—Å—Ç—å</div>
        <div id="profileRole">‚Äî</div>

        <div class="profile-label">–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è</div>
        <div id="profileOrg">‚Äî</div>
    </div>

    <button class="btn btn-danger full" onclick="resetEmployee()">–í—ã–π—Ç–∏</button>

    <div class="bottom-nav">
        <div class="nav-item" onclick="goEmployeeHome()">
            <span class="nav-icon">üè†</span>
            <span class="nav-label">–ì–ª–∞–≤–Ω–∞—è</span>
        </div>
        <div class="nav-item" onclick="openTasksScreen()">
            <span class="nav-icon">üìù</span>
            <span class="nav-label">–ü–æ—Ä—É—á–µ–Ω–∏—è</span>
        </div>
        <div class="nav-item" onclick="openDatabase()">
            <span class="nav-icon">üìö</span>
            <span class="nav-label">–ë–∞–∑–∞</span>
        </div>
        <div class="nav-item" onclick="openAIChat()">
            <span class="nav-icon">ü§ñ</span>
            <span class="nav-label">–ò–ò</span>
        </div>
        <div class="nav-item active">
            <span class="nav-icon">üë§</span>
            <span class="nav-label">–ü—Ä–æ—Ñ–∏–ª—å</span>
        </div>
    </div>
</div>

<!-- =================== –ë–ê–ó–ê –î–ê–ù–ù–´–• –°–û–¢–†–£–î–ù–ò–ö–ê =================== -->
<div id="databaseScreen" class="screen">
    <div class="top-bar">
        <button class="top-back" onclick="goEmployeeHome()">‚Üê –ù–∞–∑–∞–¥</button>
        <div class="top-title">–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö</div>
    </div>

    <div id="dbSectionList" class="db-list"></div>

    <button class="btn btn-primary full" onclick="addDbSection()">–î–æ–±–∞–≤–∏—Ç—å —Ä–∞–∑–¥–µ–ª</button>
</div>

<!-- =================== –°–û–ó–î–ê–ù–ò–ï –ü–û–†–£–ß–ï–ù–ò–Ø =================== -->
<div id="createTaskScreen" class="screen">
    <div class="top-bar">
        <button class="top-back" onclick="goEmployeeHome()">‚Üê –ù–∞–∑–∞–¥</button>
        <div class="top-title">–ù–æ–≤–æ–µ –ø–æ—Ä—É—á–µ–Ω–∏–µ</div>
    </div>

    <div class="form">
        <label>–ö–æ–º—É</label>
        <select id="taskTarget"></select>

        <label>–û–ø–∏—Å–∞–Ω–∏–µ –ø–æ—Ä—É—á–µ–Ω–∏—è</label>
        <textarea id="taskDescription" placeholder="–û–ø–∏—à–∏—Ç–µ —Å—É—Ç—å –ø–æ—Ä—É—á–µ–Ω–∏—è..."></textarea>

        <label>–î–µ–¥–ª–∞–π–Ω</label>
        <input type="date" id="taskDeadline" />
    </div>

    <div class="sub-title">–¢–∞–±–ª–∏—Ü–∞ –≤ –ø–æ—Ä—É—á–µ–Ω–∏–∏</div>
    <div id="tableEditor" class="table-editor"></div>

    <div class="table-controls">
        <button class="btn btn-secondary" onclick="addTableColumn()">+ –°—Ç–æ–ª–±–µ—Ü</button>
        <button class="btn btn-secondary" onclick="addTableRow()">+ –°—Ç—Ä–æ–∫–∞</button>
    </div>

    <button class="btn btn-primary full" onclick="saveTask()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–æ—Ä—É—á–µ–Ω–∏–µ</button>
</div>

<!-- =================== –°–ü–ò–°–û–ö –ü–û–†–£–ß–ï–ù–ò–ô =================== -->
<div id="tasksScreen" class="screen">
    <div class="top-bar">
        <button class="top-back" onclick="goEmployeeHome()">‚Üê –ù–∞–∑–∞–¥</button>
        <div class="top-title">–ü–æ—Ä—É—á–µ–Ω–∏—è</div>
    </div>

    <div id="tasksList" class="tasks-list"></div>
</div>

<!-- =================== –ò–ò-–ß–ê–¢ =================== -->
<div id="aiScreen" class="screen">
    <div class="top-bar">
        <button class="top-back" onclick="backFromAI()">‚Üê –ù–∞–∑–∞–¥</button>
        <div class="top-title">–ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç</div>
    </div>

    <div id="aiChat" class="chat-container"></div>

    <div class="chat-input-box">
        <input id="aiMessage" placeholder="–í–∞—à –≤–æ–ø—Ä–æ—Å..." />
        <button onclick="sendAI()">‚û§</button>
    </div>
</div>

<!-- =================== –ì–õ–ê–í–ù–´–ô –≠–ö–†–ê–ù –ì–û–°–¢–Ø =================== -->
<div id="guestHome" class="screen">
    <div class="header">
        <div class="header-logo-circle">
            <img src="img/karaganda_gerb.jpeg" alt="–ì–µ—Ä–±" class="header-logo" />
        </div>
        <div class="header-text">
            <div class="header-role">–ì–æ—Å—Ç–µ–≤–æ–π —Ä–µ–∂–∏–º</div>
            <div class="header-org">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è –Ω–∞—Å–µ–ª–µ–Ω–∏—è</div>
        </div>
    </div>

    <div class="menu-row">
        <button class="menu-pill" onclick="openAIChat()">
            <span class="pill-icon">ü§ñ</span>
            <span class="pill-label">–ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å –ò–ò</span>
        </button>
        <button class="menu-pill" onclick="openGuestRequestInfo()">
            <span class="pill-icon">üì®</span>
            <span class="pill-label">–ó–∞–ø—Ä–æ—Å–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é</span>
        </button>
        <button class="menu-pill" onclick="openGuestEvents()">
            <span class="pill-icon">üìÖ</span>
            <span class="pill-label">–ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</span>
        </button>
        <button class="menu-pill" onclick="openGuestSections()">
            <span class="pill-icon">üèüÔ∏è</span>
            <span class="pill-label">–°–µ–∫—Ü–∏–∏</span>
        </button>
        <button class="menu-pill" onclick="openGuestResults()">
            <span class="pill-icon">üèÖ</span>
            <span class="pill-label">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã</span>
        </button>
    </div>

    <div class="bottom-nav">
        <div class="nav-item active" onclick="showScreen('guestHome')">
            <span class="nav-icon">üè†</span>
            <span class="nav-label">–ì–ª–∞–≤–Ω–∞—è</span>
        </div>
        <div class="nav-item" onclick="openAIChat()">
            <span class="nav-icon">ü§ñ</span>
            <span class="nav-label">–ò–ò</span>
        </div>
        <div class="nav-item" onclick="openGuestProfile()">
            <span class="nav-icon">üë§</span>
            <span class="nav-label">–ü—Ä–æ—Ñ–∏–ª—å</span>
        </div>
    </div>
</div>

<!-- =================== –ü–†–û–§–ò–õ–¨ –ì–û–°–¢–Ø =================== -->
<div id="guestProfile" class="screen">
    <div class="top-bar">
        <button class="top-back" onclick="showScreen('guestHome')">‚Üê –ù–∞–∑–∞–¥</button>
        <div class="top-title">–ü—Ä–æ—Ñ–∏–ª—å –≥–æ—Å—Ç—è</div>
    </div>

    <div class="avatar-block">
        <div class="avatar-circle">
            <img id="guestAvatarImg" alt="–§–æ—Ç–æ –≥–æ—Å—Ç—è" />
            <span id="guestAvatarPlaceholder">–§–æ—Ç–æ</span>
        </div>
        <button class="btn btn-secondary btn-small" onclick="triggerGuestPhoto()">–ò–∑–º–µ–Ω–∏—Ç—å —Ñ–æ—Ç–æ</button>
        <input id="guestAvatarInput" type="file" accept="image/*" capture="environment" style="display:none" onchange="handleGuestPhoto(this)" />
    </div>

    <div class="form">
        <label>–§–ò–û</label>
        <input id="guestFio" />

        <label>–¢–µ–ª–µ—Ñ–æ–Ω</label>
        <input id="guestPhone" />

        <label>–ò–ò–ù</label>
        <input id="guestIin" />
    </div>

    <button class="btn btn-primary full" onclick="saveGuestProfile()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
</div>

<!-- =================== –ì–û–°–¢–¨ ‚Äî –ú–ï–†–û–ü–†–ò–Ø–¢–ò–Ø =================== -->
<div id="guestEvents" class="screen">
    <div class="top-bar">
        <button class="top-back" onclick="showScreen('guestHome')">‚Üê –ù–∞–∑–∞–¥</button>
        <div class="top-title">–ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</div>
    </div>
    <div class="info-placeholder">
        –ó–¥–µ—Å—å –±—É–¥—É—Ç –≤—ã–≤–æ–¥–∏—Ç—å—Å—è –±–ª–∏–∂–∞–π—à–∏–µ —Å–ø–æ—Ä—Ç–∏–≤–Ω—ã–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –∑–∞–ø–æ–ª–Ω—è—é—Ç –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.
    </div>
</div>

<!-- =================== –ì–û–°–¢–¨ ‚Äî –°–ï–ö–¶–ò–ò =================== -->
<div id="guestSections" class="screen">
    <div class="top-bar">
        <button class="top-back" onclick="showScreen('guestHome')">‚Üê –ù–∞–∑–∞–¥</button>
        <div class="top-title">–°–µ–∫—Ü–∏–∏ –∏ —Ç—Ä–µ–Ω–µ—Ä—ã</div>
    </div>
    <div class="info-placeholder">
        –ó–¥–µ—Å—å –±—É–¥—É—Ç —Ä–∞–∑–¥–µ–ª—ã —Å–µ–∫—Ü–∏–π, —Ç—Ä–µ–Ω–µ—Ä–æ–≤ –∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ, —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–∑ –¥–∞–Ω–Ω—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤.
    </div>
</div>

<!-- =================== –ì–û–°–¢–¨ ‚Äî –†–ï–ó–£–õ–¨–¢–ê–¢–´ =================== -->
<div id="guestResults" class="screen">
    <div class="top-bar">
        <button class="top-back" onclick="showScreen('guestHome')">‚Üê –ù–∞–∑–∞–¥</button>
        <div class="top-title">–ù–æ–≤–æ—Å—Ç–∏ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</div>
    </div>
    <div class="info-placeholder">
        –ó–¥–µ—Å—å –±—É–¥—É—Ç –Ω–æ–≤–æ—Å—Ç–∏, —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–ø–æ—Ä—Ç—Å–º–µ–Ω–æ–≤ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è–º.
    </div>
</div>

<!-- =================== –ì–û–°–¢–¨ ‚Äî –ó–ê–ü–†–û–° –ò–ù–§–û–†–ú–ê–¶–ò–ò =================== -->
<div id="guestRequest" class="screen">
    <div class="top-bar">
        <button class="top-back" onclick="showScreen('guestHome')">‚Üê –ù–∞–∑–∞–¥</button>
        <div class="top-title">–ó–∞–ø—Ä–æ—Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏</div>
    </div>

    <div class="form">
        <label>–¢–µ–º–∞ –∑–∞–ø—Ä–æ—Å–∞</label>
        <input id="guestRequestTitle" />

        <label>–°—É—Ç—å –≤–æ–ø—Ä–æ—Å–∞</label>
        <textarea id="guestRequestText" placeholder="–û–ø–∏—à–∏—Ç–µ, –∫–∞–∫—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø–æ–ª—É—á–∏—Ç—å..."></textarea>
    </div>

    <button class="btn btn-primary full" onclick="sendGuestRequest()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å (–¥–µ–º–æ)</button>
</div>

<script src="script.js"></script>
</body>
</html>
